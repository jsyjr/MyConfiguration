#!/bin/dash

append_gitignore_lines() {
    if [ -e ${1}.gitignore ] ; then
        chmod a+w ${1}.gitignore
        echo    >>${1}.gitignore
    else
        touch     ${1}.gitignore
    fi
    echo >>${1}.gitignore "# Rules added by syncmaster's add-git-ignore-files"
    echo >>${1}.gitignore
    cat  >>${1}.gitignore
}


# Add/tweak .gitignore files to get a git repository of moderate size
append_gitignore_lines() <<EOF
/config/
/.sbtools/
/build.glnxa64.log.files/
/build.log.files/

/*.log
/changes.sbsmartbuild.mk
/GPATH
/GRTAGS
/GTAGS
/ID
/sbrestore_*.txt
/.sbcheck.*
.gdb_history
EOF

append_gitignore_lines() matlab/ <<EOF
/*/
!/src/
!/test/
!/toolbox/
EOF

append_gitignore_lines() matlab/src/ <<EOF
/*/
!/cg_ir/
!/cgir_*/
*.xcodeproj/
.ts/
.validate_dox.ts
._libmw*.xcconfig
libmw*.xcconfig
suite_registration.cpp
EOF

append_gitignore_lines() matlab/test/ <<EOF
/*/
!/toolbox/
EOF

append_gitignore_lines() matlab/test/toolbox/ <<EOF
/*/
!/cgir/
EOF

append_gitignore_lines() matlab/toolbox/ <<EOF
/*/
!/cgir/
EOF
